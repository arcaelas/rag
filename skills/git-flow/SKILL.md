# Git Flow

Skill para git workflow, commits, y manejo de ramas.

## Tipos de Ramas

Todas las ramas se crean desde `main`:

| Tipo | Patron | Uso |
|------|--------|-----|
| feature | `feature/{issue-id}` | Nueva funcionalidad |
| fix | `fix/{issue-id}` | Correccion de bug |
| bug | `bug/{issue-id}` | Bug tracking |
| chore | `chore/{issue-id}` | Mantenimiento |

```bash
# Crear rama desde main
git checkout main
git pull origin main
git checkout -b feature/42
```

## Commits

### Formato Obligatorio

- Idioma: Espanol
- Prefijo: Obligatorio
- Sin atribucion a IA

```bash
# CORRECTO
git commit -m "feat: implementa autenticacion JWT"
git commit -m "fix: corrige validacion de email"
git commit -m "chore: actualiza dependencias"

# PROHIBIDO
git commit -m "add authentication"           # Ingles
git commit -m "implementa feature"            # Sin prefijo
git commit -m "feat: add auth

Co-Authored-By: Claude <noreply@anthropic.com>"  # Atribucion IA
```

### Prefijos Permitidos

| Prefijo | Uso |
|---------|-----|
| `feat:` | Nueva funcionalidad |
| `fix:` | Correccion de bug |
| `chore:` | Mantenimiento, dependencias |
| `docs:` | Documentacion |
| `refactor:` | Refactorizacion sin cambio de funcionalidad |
| `test:` | Tests |
| `style:` | Formateo, espacios, puntos y comas |

## Escenarios de Git Flow

### Escenario A: Con rama dev

Proyectos con ambiente de staging.

```
main (produccion)
  │
  └── dev (staging)
        │
        ├── feature/42
        ├── fix/43
        └── chore/44
```

```bash
# Workflow
git checkout main && git pull
git checkout -b feature/42

# Desarrollo...
git add src/lib/auth.ts
git commit -m "feat: agrega login con Google"
git push -u origin feature/42

# PR hacia dev
gh pr create --base dev --fill

# Despues de merge a dev y testing
# PR de dev hacia main (merge de release)
```

### Escenario B: Solo main

Proyectos simples sin staging.

```
main
  │
  ├── feature/42
  ├── fix/43
  └── chore/44
```

```bash
# Workflow
git checkout main && git pull
git checkout -b feature/42

# Desarrollo...
git add src/components/Button/index.tsx
git commit -m "feat: agrega componente Button"
git push -u origin feature/42

# PR directo a main
gh pr create --base main --fill
```

## Comandos de Trabajo

### Iniciar trabajo

```bash
git checkout main
git pull origin main
git checkout -b feature/{issue-id}
```

### Durante desarrollo

```bash
# Agregar archivos especificos (NO usar git add .)
git add src/lib/auth/index.ts
git add src/components/LoginForm/index.tsx

git commit -m "feat: descripcion en espanol"
```

### Finalizar trabajo

```bash
git push -u origin feature/{issue-id}
gh pr create --base dev --fill  # o --base main

# Despues del merge
git checkout main
git pull origin main
git branch -d feature/{issue-id}
```

## Multiples Usuarios gh

Antes de crear issues o PRs, verificar el usuario correcto:

```bash
# Ver usuarios autenticados
gh auth status

# Si hay multiples cuentas, verificar permisos del repo
gh api repos/{owner}/{repo} --jq '.permissions'
```

## Prohibiciones Absolutas

- Push directo a `main`, `dev`, o `prod`
- Commits en ingles
- Commits sin prefijo
- Atribuciones a IA (Co-Authored-By, "Generated by AI", etc.)
- Usar `git add .` o `git add -A` (agregar archivos especificos)
- Force push a ramas protegidas

## Checklist Pre-Commit

- [ ] Rama creada desde `main`
- [ ] Nombre de rama correcto (`feature/`, `fix/`, etc.)
- [ ] Commit en espanol
- [ ] Commit con prefijo valido
- [ ] Sin atribucion a IA
- [ ] Archivos agregados especificamente (no `git add .`)
